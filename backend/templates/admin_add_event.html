<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Admin — New Event</title>
    <style>
        body{font-family:system-ui,Arial; margin:0; background:#0b0720; color:#f0eff6}
        .wrap{max-width:720px; margin:0 auto; padding:18px}
        .card{background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:14px; margin:12px 0}
        input,textarea{width:100%; padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.05); color:#f0eff6}
        label{display:block; margin:10px 0 6px}
        button{padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.10); color:#f0eff6; font-weight:800; cursor:pointer}
        a{color:#f0eff6; opacity:.9}
    </style>
</head>
<body>
<div class="wrap">
    <h2>＋ Create event</h2>
    <div class="card">
        <div><b>Club:</b> {{ club.name }} <span style="opacity:.7">(#{{ club.id }})</span></div>
    </div>

    <div class="card">
        <form method="post" action="/admin/events/new">
            <label>Title</label>
            <input name="title" required placeholder="Friday Night"/>

            <label>Preview (optional)</label>
            <textarea name="preview" rows="3" placeholder="Short description"></textarea>

            <label>Start (optional)</label>
            <input name="start_date" type="datetime-local"/>

            <label>End (optional)</label>
            <input name="end_date" type="datetime-local"/>

            <div style="margin-top:12px; display:flex; gap:10px; align-items:center">
                <button type="submit">Create</button>
                <a href="/admin">← Back</a>
            </div>
        </form>
    </div>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    (async function(){
        const tg = window.Telegram?.WebApp;
        if(!tg?.initData) return;
        try{
            await fetch('/admin/session', {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({init_data: tg.initData})
            });
        }catch(e){}
    })();
</script>
</body>
</html>
