<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Next Track ‚Äî Let the crowd choose what plays next</title>
  <meta name="description" content="Next Track ‚Äî Telegram Web App where the crowd suggests and votes for what plays next in real time." />

  <style>
    :root{
      --bg:#0b0720;
      --txt:#e7e7f1;
      --muted:#b8b6d3;
      --accent1:#4dd0ff;
      --accent2:#ff4dd2;
      --glass:rgba(255,255,255,.06);
      --border:rgba(255,255,255,.12);
      --shadow:0 10px 40px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
      --radius:18px;
      --maxw:1160px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--txt);background:var(--bg);overflow-x:hidden;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    a{color:inherit;text-decoration:none}
    .container{width:100%;max-width:var(--maxw);margin:0 auto;padding:0 20px}

    /* ===== Gradient mesh background ===== */
    .bg{
      position:fixed; inset:0; z-index:-2; pointer-events:none;
      background:
        radial-gradient(60vw 60vw at 10% 15%, rgba(77,208,255,.25), transparent 60%),
        radial-gradient(50vw 50vw at 90% -10%, rgba(255,77,210,.20), transparent 60%),
        radial-gradient(40vw 40vw at 70% 80%, rgba(105,92,255,.18), transparent 60%),
        radial-gradient(30vw 30vw at -10% 90%, rgba(255,162,92,.12), transparent 60%),
        linear-gradient(180deg, #0b0720 0%, #08051a 100%);
      filter:saturate(120%) blur(0.2px);
    }
    .blob{
      position:fixed; width:52vmin; height:52vmin; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, rgba(77,208,255,.25), rgba(255,77,210,.15));
      mix-blend-mode:screen; filter:blur(20px); opacity:.45; z-index:-1;
      animation: drift 24s ease-in-out infinite;
    }
    .blob.b2{right:-8vmin; top:10vmin; animation-duration:28s; background:radial-gradient(circle at 70% 40%, rgba(255,77,210,.25), rgba(77,208,255,.12))}
    .blob.b3{left:10vmin; bottom:-10vmin; animation-duration:32s; background:radial-gradient(circle at 50% 60%, rgba(105,92,255,.25), rgba(77,208,255,.10))}
    @keyframes drift{0%{transform:translate(-5vmin,0) scale(1)}50%{transform:translate(5vmin,2vmin) scale(1.08)}100%{transform:translate(-5vmin,0) scale(1)}}

    /* ===== Header ===== */
    header{
      position:sticky; top:0; backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(180deg, rgba(8,5,26,.65), rgba(8,5,26,.20));
      border-bottom:1px solid var(--border); z-index:10;
    }
    .nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0;}
    .brand{display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.2px}
    .brand img{width:40px; height:40px; border-radius:10px; object-fit:cover}
    .brand span{font-size:18px; background:linear-gradient(90deg,var(--accent1),var(--accent2));
      -webkit-background-clip:text; background-clip:text; color:transparent;}
    .actions{display:flex; align-items:center; gap:10px}
    .pill{
      display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
      border:1px solid var(--border); background:var(--glass); box-shadow:var(--shadow);
      transition:transform .2s ease, border-color .2s ease, background .2s ease, opacity .2s ease;
      font-weight:600; cursor:pointer; user-select:none;
    }
    .pill:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.25)}
    .primary{
      background:linear-gradient(135deg, rgba(77,208,255,.18), rgba(255,77,210,.18));
      border:1px solid rgba(255,255,255,.25);
    }

    /* Language toggle */
    .lang-toggle button{
      border:none; background:transparent; color:var(--muted);
      font-weight:700; letter-spacing:.3px; cursor:pointer;
      padding:8px 10px; border-radius:999px;
    }
    .lang-toggle button.active{color:var(--txt); background:rgba(255,255,255,.06); border:1px solid var(--border)}

    /* ===== Hero ===== */
    .hero{padding:84px 0 56px}
    .hero .wrap{display:grid; grid-template-columns:1.2fr .8fr; gap:28px; align-items:center}
    .title{
      font-size:clamp(34px,5vw,60px); line-height:1.05; font-weight:900; margin:0 0 14px;
      letter-spacing:-.5px;
      background:linear-gradient(90deg,var(--txt),#d5d3ff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .subtitle{font-size:clamp(16px,1.3vw,20px); color:var(--muted); margin:0 0 26px; max-width:46ch}
    .cta{display:flex; gap:12px; flex-wrap:wrap}
    .badge{
      display:inline-flex; align-items:center; gap:8px; font-size:14px; color:#dcdaf8;
      background:linear-gradient(90deg, rgba(77,208,255,.18), rgba(255,77,210,.18));
      border:1px solid rgba(255,255,255,.20); padding:8px 12px; border-radius:999px;
    }

    /* ===== Phone mock (shell) ===== */
    .mock{justify-self:end; width:min(420px,86%); aspect-ratio:9/18;
      border-radius:36px; padding:18px; position:relative;
      background:linear-gradient(145deg,#14122b,#0d0a22); border:1px solid var(--border);
      box-shadow:var(--shadow); overflow:hidden;}
    .mock:before{
      content:""; position:absolute; inset:-30%;
      background:radial-gradient(120px 120px at 70% 20%, rgba(77,208,255,.35), transparent 60%),
                 radial-gradient(140px 140px at 20% 80%, rgba(255,77,210,.25), transparent 60%);
      filter:blur(20px); animation:glow 7s ease-in-out infinite alternate;
    }
    @keyframes glow{from{transform:translate(-2%,1%)}to{transform:translate(2%,-1%)}}
    .screen{position:relative; z-index:1; height:100%; border-radius:26px;
      padding:16px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08);
      display:flex; flex-direction:column; gap:10px;}

    /* ===== Interactive phone ===== */
    .phone{gap:14px}
    .phone-top{display:flex; align-items:center; justify-content:space-between}
    .pill.tiny{padding:6px 10px; font-size:12px; border-radius:999px;
      background:rgba(77,208,255,.14); border:1px solid rgba(255,255,255,.18)}

    .phone-view{display:block}
    .track-list{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:12px}
    .track-item{position:relative; display:flex; gap:12px; align-items:center;
      padding:12px; border-radius:16px; background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);}
    .i-cover{width:42px; height:42px; border-radius:12px;
      background:linear-gradient(135deg, var(--accent1), var(--accent2)); flex:0 0 auto;}
    .i-body{flex:1 1 auto; min-width:0}
    .i-title{font-weight:800; font-size:14px; letter-spacing:.1px}
    .i-sub{color:var(--muted); font-size:12px}
    .i-bars{margin-top:8px}
    .bar2{--v:50%; --t:40%; position:relative; height:8px; border-radius:999px;
      background:rgba(255,255,255,.09); overflow:hidden}
    .bar2 span.votes, .bar2 span.trend{
      position:absolute; left:0; top:0; bottom:0; border-radius:999px; transform-origin:left center;
      transition:width .45s cubic-bezier(.2,.7,.2,1), filter .45s;
    }
    .bar2 span.votes{width:var(--v); background:linear-gradient(90deg, var(--accent1), #a1e1ff)}
    .bar2 span.trend{width:var(--t); background:linear-gradient(90deg, var(--accent2), #ff9de6); opacity:.9}
    .vote-btn{flex:0 0 auto; border:none; cursor:pointer; border-radius:12px; padding:10px 12px;
      background:linear-gradient(135deg, rgba(77,208,255,.18), rgba(255,77,210,.18));
      border:1px solid rgba(255,255,255,.22); font-weight:800; letter-spacing:.3px}
    .vote-btn[disabled]{opacity:.55; cursor:not-allowed}
    .vote-btn .ok{display:none}
    .vote-btn.voted .ok{display:inline}
    .vote-btn.voted .txt{display:none}

    .suggest{display:flex; flex-direction:column; gap:12px}
    .suggest .fields{display:grid; grid-template-columns:1fr; gap:10px}
    .suggest input{
      background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12);
      border-radius:12px; padding:12px 14px; color:var(--txt); outline:none;
    }
    .suggest input:focus{border-color:rgba(255,255,255,.28)}
    .pill.wide{width:100%; justify-content:center}

    .legend{display:flex; gap:8px}
    .chip{font-size:11px; padding:4px 8px; border-radius:999px; background:rgba(77,208,255,.16); border:1px solid rgba(255,255,255,.18)}
    .chip.alt{background:rgba(255,77,210,.16)}

    .tiny-hint{font-size:12px; margin-top:6px}

    /* Bottom nav inside the phone */
    .bottom-nav{
      margin-top:auto;
      display:flex; gap:8px; align-items:center;
      padding:10px;
      border-radius:16px;
      background:linear-gradient(180deg, rgba(8,5,26,.45), rgba(8,5,26,.7));
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(8px) saturate(140%);
      padding-bottom:calc(10px + env(safe-area-inset-bottom, 0px));
    }
    .btab{
      flex:1 1 0;
      border:none; cursor:pointer;
      padding:10px 12px; border-radius:12px;
      font-weight:800; letter-spacing:.3px;
      color:#e7e7f1;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      transition:transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .btab.active{
      background:linear-gradient(135deg, rgba(77,208,255,.18), rgba(255,77,210,.18));
      border-color:rgba(255,255,255,.28);
    }
    .btab:active{transform:translateY(1px)}

    /* ===== Sections ===== */
    section{padding:72px 0}
    .grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-top:26px;}
    .card{background:var(--glass); border:1px solid var(--border); border-radius:var(--radius);
      padding:20px; box-shadow:var(--shadow);}
    .card h3{margin:0 0 8px}
    .card p{margin:0; color:var(--muted)}

    .steps{display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-top:22px}
    .step{background:var(--glass); border:1px solid var(--border); border-radius:14px;
      padding:16px; text-align:center;}
    .step b{display:block; margin-bottom:6px}

    .cta-band{margin-top:34px; padding:18px; border-radius:var(--radius);
      background:linear-gradient(90deg, rgba(77,208,255,.18), rgba(255,77,210,.18));
      border:1px solid rgba(255,255,255,.25); display:flex; flex-wrap:wrap;
      align-items:center; gap:12px; justify-content:space-between;}

    footer{padding:40px 0 60px; color:var(--muted)}
    .sep{height:1px; background:var(--border); margin:6px 0 20px}

    /* reveal */
    .reveal{opacity:0; transform:translateY(16px); transition:opacity .7s ease, transform .7s ease}
    .reveal.in{opacity:1; transform:translateY(0)}

    /* responsive */
    @media(max-width:1000px){
      .hero .wrap{grid-template-columns:1fr}
      .mock{justify-self:center}
      .grid-3{grid-template-columns:1fr 1fr}
      .steps{grid-template-columns:1fr 1fr}
    }
    @media(max-width:640px){
      .grid-3{grid-template-columns:1fr}
      .steps{grid-template-columns:1fr}
    }

    .hidden{display:none!important}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <!-- Background -->
  <div class="bg"></div>
  <div class="blob"></div>
  <div class="blob b2"></div>
  <div class="blob b3"></div>

  <!-- Header -->
  <header>
    <div class="container nav">
      <div class="brand">
        <img src="assets/logo.png" alt="Next Track logo" />
        <span>Next Track</span>
      </div>
      <div class="actions">
        <div class="lang-toggle">
          <button data-lang="en" class="active">EN</button>
          <button data-lang="ru">RU</button>
        </div>
        <a class="pill primary" href="https://t.me/next_track_bot?start=webapp" target="_blank" rel="noopener">üöÄ Launch in Telegram</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container wrap">
      <div>
        <h1 class="title i18n" data-key="hero_title_en">Let the crowd choose what plays next</h1>
        <h1 class="title i18n hidden" data-key="hero_title_ru">–ü—É—Å—Ç—å –ø—É–±–ª–∏–∫–∞ –ø–æ–¥—Å–∫–∞–∂–µ—Ç, —á—Ç–æ –∏–≥—Ä–∞—Ç—å –¥–∞–ª—å—à–µ</h1>

        <p class="subtitle i18n" data-key="hero_sub_en">
          A Telegram Web App where your audience votes and suggests tracks in real time. You stay in control ‚Äî the crowd guides the vibe.
        </p>
        <p class="subtitle i18n hidden" data-key="hero_sub_ru">
          Telegram Web App, –≥–¥–µ –∞—É–¥–∏—Ç–æ—Ä–∏—è –≥–æ–ª–æ—Å—É–µ—Ç –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ç—Ä–µ–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –¢—ã –æ—Å—Ç–∞—ë—à—å—Å—è –≥–ª–∞–≤–Ω—ã–º ‚Äî –ø—É–±–ª–∏–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞–π–±.
        </p>

        <div class="cta">
          <a class="pill primary" href="https://t.me/next_track_bot?start=webapp" target="_blank" rel="noopener">Open in Telegram</a>
          <span class="badge">üîê Login with Telegram ‚Ä¢ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ</span>
        </div>
      </div>

      <!-- Phone mock (interactive, bottom buttons) -->
      <div class="mock reveal" aria-label="Voting demo">
        <div class="screen phone">
          <header class="phone-top">
            <div class="pill tiny">Now ‚Ä¢ Live</div>
          </header>

          <!-- Up Next list -->
          <div class="phone-view" data-view="upnext">
            <ul class="track-list" id="trackList"></ul>
          </div>

          <!-- Suggest form -->
          <div class="phone-view hidden" data-view="suggest">
            <form id="suggestForm" class="suggest">
              <div class="fields">
                <input type="text" id="sTitle" placeholder="Track ‚Äî Artist" required />
                <input type="text" id="sNote" placeholder="Optional note (remix, vibe‚Ä¶)" />
              </div>
              <button class="pill primary wide" type="submit">+ Add to voting</button>
            </form>
            <p class="muted tiny-hint">Demo only ‚Äî adds a local card with 1 vote.</p>
          </div>

          <!-- Bottom nav -->
          <nav class="bottom-nav">
            <button class="btab active" data-tab="upnext">‚¨Ü Up Next</button>
            <button class="btab" data-tab="suggest">‚ûï Suggest</button>
          </nav>
        </div>
      </div>
      <!-- /Phone mock -->
    </div>
  </section>

  <!-- Roles -->
  <section id="roles">
    <div class="container">
      <div class="grid-3">
        <article class="card reveal">
          <h3 class="i18n" data-key="dj_en">DJ Panel</h3>
          <h3 class="i18n hidden" data-key="dj_ru">–ü–∞–Ω–µ–ª—å –¥–∏–¥–∂–µ—è</h3>
          <p class="i18n" data-key="dj_text_en">See what the crowd wants next ‚Äî live suggestions, instant stats, no playlist upload. You decide, they help steer.</p>
          <p class="i18n hidden" data-key="dj_text_ru">–°–º–æ—Ç—Ä–∏, —á–µ–≥–æ —Ö–æ—á–µ—Ç –∑–∞–ª ‚Äî –∂–∏–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏, –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤. –†–µ—à–µ–Ω–∏–µ –∑–∞ —Ç–æ–±–æ–π, –≤–µ–∫—Ç–æ—Ä –∑–∞–¥–∞—ë—Ç –ø—É–±–ª–∏–∫–∞.</p>
        </article>

        <article class="card reveal">
          <h3 class="i18n" data-key="user_en">User Panel</h3>
          <h3 class="i18n hidden" data-key="user_ru">–ü–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
          <p class="i18n" data-key="user_text_en">Join in Telegram, vote for tracks, suggest your own, watch the ‚ÄúUp Next‚Äù feed update in real time.</p>
          <p class="i18n hidden" data-key="user_text_ru">–ó–∞—Ö–æ–¥–∏ —á–µ—Ä–µ–∑ Telegram, –≥–æ–ª–æ—Å—É–π –∑–∞ —Ç—Ä–µ–∫–∏, –ø—Ä–µ–¥–ª–∞–≥–∞–π —Å–≤–æ–∏ –∏ —Å–º–æ—Ç—Ä–∏, –∫–∞–∫ –ª–µ–Ω—Ç–∞ ¬´–î–∞–ª—å—à–µ¬ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</p>
        </article>

        <article class="card reveal">
          <h3 class="i18n" data-key="org_en">Organizer Panel</h3>
          <h3 class="i18n hidden" data-key="org_ru">–ü–∞–Ω–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞</h3>
          <p class="i18n" data-key="org_text_en">Create events, invite DJs, control voting windows, track engagement ‚Äî all in one dashboard.</p>
          <p class="i18n hidden" data-key="org_text_ru">–°–æ–∑–¥–∞–≤–∞–π –∏–≤–µ–Ω—Ç—ã, –ø–æ–¥–∫–ª—é—á–∞–π –¥–∏–¥–∂–µ–µ–≤, —É–ø—Ä–∞–≤–ª—è–π –æ–∫–Ω–∞–º–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∏ —Å–º–æ—Ç—Ä–∏ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–π –ø–∞–Ω–µ–ª–∏.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section id="how">
    <div class="container">
      <h2 class="reveal i18n" data-key="how_en">How it works</h2>
      <h2 class="reveal i18n hidden" data-key="how_ru">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>

      <div class="steps">
        <div class="step reveal">
          <b class="i18n" data-key="s1_en">1) Organizer creates an event</b>
          <b class="i18n hidden" data-key="s1_ru">1) –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∏–≤–µ–Ω—Ç</b>
        </div>
        <div class="step reveal">
          <b class="i18n" data-key="s2_en">2) DJ goes live</b>
          <b class="i18n hidden" data-key="s2_ru">2) –î–∏–¥–∂–µ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –ª–∞–π–≤</b>
        </div>
        <div class="step reveal">
          <b class="i18n" data-key="s3_en">3) Users vote & suggest tracks</b>
          <b class="i18n hidden" data-key="s3_ru">3) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≥–æ–ª–æ—Å—É—é—Ç –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Ç—Ä–µ–∫–∏</b>
        </div>
        <div class="step reveal">
          <b class="i18n" data-key="s4_en">4) DJ sees ‚ÄúUp Next‚Äù suggestions</b>
          <b class="i18n hidden" data-key="s4_ru">4) –î–∏–¥–∂–µ–π –≤–∏–¥–∏—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ ¬´–ß—Ç–æ –¥–∞–ª—å—à–µ¬ª</b>
        </div>
      </div>

      <div class="cta-band reveal">
        <div>
          <strong class="i18n" data-key="cta_en">Ready to make your crowd part of the mix?</strong>
          <strong class="i18n hidden" data-key="cta_ru">–ì–æ—Ç–æ–≤ —Å–¥–µ–ª–∞—Ç—å –ø—É–±–ª–∏–∫—É —á–∞—Å—Ç—å—é —Å–µ—Ç–∞?</strong>
        </div>
        <a class="pill primary" href="https://t.me/next_track_bot?start=webapp" target="_blank" rel="noopener">Start in Telegram</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="sep"></div>
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap">
        <small>¬© <span id="year"></span> Next Track</small>
        <small class="i18n" data-key="foot_en">Built for Telegram Web Apps ‚Ä¢ Dark & modern UI</small>
        <small class="i18n hidden" data-key="foot_ru">–°–æ–∑–¥–∞–Ω–æ –¥–ª—è Telegram Web Apps ‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—ë–º–Ω—ã–π UI</small>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Helper
    const $ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // --- Language toggle (fixed) ---
    const langButtons = $('.lang-toggle button');
    function setLang(code){
      langButtons.forEach(b => b.classList.toggle('active', b.dataset.lang === code));
      document.documentElement.lang = code === 'ru' ? 'ru' : 'en';
      const showSuffix = code === 'ru' ? '_ru' : '_en';
      const hideSuffix = code === 'ru' ? '_en' : '_ru';
      document.querySelectorAll('.i18n').forEach(el => {
        const key = el.dataset.key || '';
        if (key.endsWith(showSuffix)) el.classList.remove('hidden');
        else if (key.endsWith(hideSuffix)) el.classList.add('hidden');
      });
      localStorage.setItem('nt_lang', code);
    }
    langButtons.forEach(b => b.addEventListener('click', () => setLang(b.dataset.lang)));
    setLang(localStorage.getItem('nt_lang') || 'en');

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Scroll reveal
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target); }
      });
    },{threshold:.12});
    $('.reveal').forEach(el=>io.observe(el));

    // Button hover tilt
    $('.pill').forEach(btn=>{
      btn.addEventListener('mousemove', e=>{
        const r = btn.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width - .5;
        const y = (e.clientY - r.top)/r.height - .5;
        btn.style.transform = `translateY(-1px) perspective(600px) rotateX(${y*-3}deg) rotateY(${x*3}deg)`;
      });
      btn.addEventListener('mouseleave', ()=> btn.style.transform='');
    });
  </script>

  <!-- Voting demo logic -->
  <script>
  (() => {
    // Track seed
    const seed = [
      { id:'t1', title:'Top pick ‚Äî ‚ÄúMidnight City‚Äù', sub:'Next up ‚Ä¢ crowd votes', votes:82, trend:58 },
      { id:'t2', title:'‚ÄúOne More Time‚Äù', sub:'Runner-up', votes:64, trend:36 },
      { id:'t3', title:'‚ÄúBlue Monday‚Äù', sub:'Trending', votes:48, trend:22 },
    ];
    const saved = JSON.parse(localStorage.getItem('nt_demo_tracks') || 'null');
    const tracks = saved && Array.isArray(saved) ? saved : seed.slice();
    const votedSet = new Set(JSON.parse(localStorage.getItem('nt_demo_votes') || '[]'));
    const list = document.getElementById('trackList');

    function confettiAt(el){
      const box = el.closest('.track-item');
      if(!box) return;
      let wrap = box.querySelector('.confetti');
      if(!wrap){
        wrap = document.createElement('div');
        wrap.className = 'confetti';
        box.appendChild(wrap);
      }
      for(let i=0;i<12;i++){
        const p = document.createElement('i');
        p.style.left = (12 + Math.random()*76) + '%';
        p.style.top = (0 + Math.random()*8) + '%';
        p.style.transform = `translateY(0) rotate(${Math.random()*60-30}deg)`;
        wrap.appendChild(p);
        setTimeout(()=>p.remove(), 750);
      }
    }

    function render(){
      tracks.sort((a,b)=>b.votes - a.votes);
      list.innerHTML = '';
      for(const t of tracks){
        const li = document.createElement('li');
        li.className = 'track-item';
        li.innerHTML = `
          <div class="i-cover" aria-hidden="true"></div>
          <div class="i-body">
            <div class="i-title">${t.title}</div>
            <div class="i-sub">${t.sub}</div>
            <div class="i-bars">
              <div class="bar2" style="--v:${t.votes}%; --t:${t.trend}%">
                <span class="votes"></span>
                <span class="trend"></span>
              </div>
            </div>
          </div>
          <button class="vote-btn ${votedSet.has(t.id)?'voted':''}" data-id="${t.id}">
            <span class="txt">Vote</span><span class="ok">‚úî</span>
          </button>
        `;
        list.appendChild(li);
      }
      persist();
    }

    function persist(){
      localStorage.setItem('nt_demo_tracks', JSON.stringify(tracks));
      localStorage.setItem('nt_demo_votes', JSON.stringify(Array.from(votedSet)));
    }

    // Vote handler
    list.addEventListener('click', (e)=>{
      const btn = e.target.closest('.vote-btn');
      if(!btn) return;
      const id = btn.dataset.id;
      if(votedSet.has(id)) return; // one vote per track (demo)
      const t = tracks.find(x=>x.id===id);
      if(!t) return;
      t.votes = Math.min(100, t.votes + (3 + Math.round(Math.random()*3)));
      t.trend = Math.min(100, t.trend + (2 + Math.round(Math.random()*2)));
      votedSet.add(id);
      btn.classList.add('voted');
      confettiAt(btn);
      render();
    });

    // Bottom tabs
    const tabs = document.querySelectorAll('.btab');
    tabs.forEach(tab=>{
      tab.addEventListener('click', ()=>{
        tabs.forEach(x=>x.classList.toggle('active', x===tab));
        const view = tab.dataset.tab;
        document.querySelectorAll('.phone-view').forEach(v=>{
          v.classList.toggle('hidden', v.dataset.view !== view);
        });
      });
    });

    // Suggest form
    const sForm = document.getElementById('suggestForm');
    sForm?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const title = (document.getElementById('sTitle').value || '').trim();
      const note  = (document.getElementById('sNote').value  || '').trim();
      if(!title) return;
      const id = 't' + Math.random().toString(36).slice(2,8);
      tracks.push({ id, title, sub: note || 'Suggested', votes: 1 + Math.round(Math.random()*3), trend: 1 });
      document.querySelector('.btab[data-tab="upnext"]').click();
      sForm.reset();
      render();
    });

    render();
  })();
  </script>
</body>
</html>
